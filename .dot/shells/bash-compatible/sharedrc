# vi:syntax=sh

# Alias definitions.
source ~/.dot/l/source_aliases
if [[ -f ~/.dot/shells/bash-compatible/jetbrainsrc ]]; then
	source ~/.dot/shells/bash-compatible/jetbrainsrc
fi

if ! [[ -d "${HOME}/.history/" ]]; then
	mkdir -p "${HOME}/.history/"
fi

if [[ -d "${HOME}/.ssh/auto" ]]; then
	add_ssh_keys $(find "${HOME}/.ssh/auto/" ! -type d)
fi

export EDITOR="vim"
export PAGER="less"

export QT_QPA_PLATFORMTHEME="qt5ct"

export LESSHISTFILE="${HOME}/.history/less"

source ~/.config/wpg/formats/colors-tty.sh || true # do this above neofetch. blanks the terminal; though it only runs if on tty.


#(cat ~/.config/wpg/sequences &) # not needed; overrides custom cursor etc.
if [[ "${TERM}" == "linux" ]]; then
	powerline_shell_theme="ext.shell.theme=\"${powerline_shell_theme}_oneline\";ext.shell.colorscheme=\"custom_tty\";ext.vim.colorscheme=\"custom_tty\";ext.tmux.colorscheme=\"custom_tty\""
else
	powerline_shell_theme="ext.shell.theme=\"${powerline_shell_theme}\""
fi
if [[ -z "${DISPLAY}" ]]; then
	neofetch
	export LANG="en_US.UTF-8" # changing lang fixes vim powerline
	export POWERLINE_CONFIG_OVERRIDES="ext.vim.top_theme=\"ascii_custom\";common.default_top_theme=\"ascii_custom\";${powerline_shell_theme}"
else
	export POWERLINE_CONFIG_OVERRIDES="${powerline_shell_theme}"
fi
unset powerline_shell_theme

LANG="en_US.UTF-8" powerline-daemon -q # need to start powerline-daemon with unicode LANG regardless. Maybe start this using systemd instead?


stty -ixon # disable Ctrl-S

ier yay --news # warns me of news I need to know before updating

