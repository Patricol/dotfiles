# vi:syntax=sh

# Alias definitions.
if [[ -d ~/.dot/aliases/ ]]; then
	for alias_file in ~/.dot/aliases/*; do
		source "${alias_file}"
	done
	unset alias_file
fi
if [[ -f ~/.dot/shells/bash-compatible/jetbrainsrc ]]; then
	source ~/.dot/shells/bash-compatible/jetbrainsrc
fi

add_ssh_keys nas_work_share

export EDITOR="vim"

export QT_QPA_PLATFORMTHEME="qt5ct"


source ~/.config/wpg/formats/colors-tty.sh || true # do this above neofetch. blanks the terminal; though it only runs if on tty.


#(cat ~/.config/wpg/sequences &) # not needed; overrides custom cursor etc.

if [[ -n "${SSH_CONNECTION}" ]]; then
	neofetch
	export LANG="en_US.UTF-8" # changing lang fixes vim powerline
fi

if [[ "${TERM}" == "linux" ]]; then
	powerline_shell_theme="ext.shell.theme=\"${powerline_shell_theme}_oneline\";ext.shell.colorscheme=\"custom_tty\";ext.vim.colorscheme=\"custom_tty\";ext.tmux.colorscheme=\"custom_tty\""
else
	powerline_shell_theme="ext.shell.theme=\"${powerline_shell_theme}\""
fi
if [[ "${TERM}" == "linux" ]] || [[ -n "${SSH_CONNECTION}" ]]; then
	export POWERLINE_CONFIG_OVERRIDES="ext.vim.top_theme=\"ascii_custom\";common.default_top_theme=\"ascii_custom\";${powerline_shell_theme}"
else
	export POWERLINE_CONFIG_OVERRIDES="${powerline_shell_theme}"
fi
unset powerline_shell_theme

LANG="en_US.UTF-8" powerline-daemon -q # need to start powerline-daemon with unicode LANG regardless


stty -ixon # disable Ctrl-S


#(dfg remote update &> /dev/null &) # run this regularly, but not here
# add something to tell me when updates are available on bash start from ssh etc.

# tty is changing colors because bold. neofetch color output must be bold; to be acting this way. need to have it not use the emphasis bit etc; or have tty-specific setups without bold stuff? but why would the background grey be missing for the cwd?


ier yay --news # warns me of news I need to know before updating

